<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Instagram_Posts4</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>$(function (){
    sagecell.makeSagecell({inputLocation:'div.linked',linked:true,evalButtonText:'Run Linked Cells'});
    sagecell.makeSagecell({inputLocation:'div.sage_html',evalButtonText:'Run HTML'});  
    sagecell.makeSagecell({inputLocation:'div.sage_js',evalButtonText:'Run JavaScript'});
    sagecell.makeSagecell({inputLocation:'div.sage_r',evalButtonText:'Run R'});  
    sagecell.makeSagecell({inputLocation:'div.sage',evalButtonText:'Run'});});
    </script>
  </head>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Orbitron');
  h1, h2 {color:#3636ff; font-family:Orbitron; text-shadow:5px 5px 5px #aaa;}
  p, a {color:darkblue; font-size:120%; text-shadow:5px 5px 5px #aaa;}
  .sagecell .CodeMirror-scroll {min-height:3em; max-height:60em;}
  body {margin:5px 5px 5px 15px;}
  </style>  
  <body>
<script src="https://profile.codersrank.io/widget/widget.js"></script>
<codersrank-widget username="olgabelitskaya" layout="vertical"
style="--header-bg-color:#3636ff; font-family:Orbitron;"></codersrank-widget>
    <h1>&#x1F4D1; &nbsp;Instagram Posts. Part 4</h1>
<a href="https://olgabelitskaya.github.io/README.html">&#x1F300; &nbsp; Home Page &nbsp; &nbsp;</a> 
<a href="https://olgabelitskaya.github.io/instagram3.html">&#x1F300; &nbsp; Previous &nbsp; &nbsp;</a>
<a href="https://olgabelitskaya.github.io/instagram5.html">&#x1F300; &nbsp; Next</a><br/>
<a href="https://www.instagram.com/olga.belitskaya/">&#x1F300; &nbsp; Instagram Posts &nbsp; &nbsp;</a>     
<a href="https://www.pinterest.ru/olga_belitskaya/code-style/">&#x1F300; &nbsp; Pinterest Posts</a>
    <h1>If packages are not installed in SageMathCell</h1>
Python &#38; SageMathCell 
    <p>Install additional packages</p>
<div class="linked"><script type="text/x-sage">
#unlock to install pygal
#!python3 -m pip install --upgrade pip --user
#!python3 -m pip install pygal --user
path='/home/sc_work/.sage/local/lib/python3.8/site-packages'
import sys; sys.path.append(path)
</script></div>
    <p>Apply them</p>     
<div class="linked"><script type="text/x-sage">
import pygal,pandas as pd
from pygal.style import BlueStyle
columns=['Fresh','Milk','Grocery','Frozen',
         'Detergents_Paper','Delicatessen']
colors=['#1b2c45','#5a8bbd','#008b8b','#ff5a8b']
index= ['C1','C2','C3']
data=[[26373,36423,22019,5154,4337,16523],
      [16165,4230,7595,201,4003,57],
      [14276,803,3045,485,100,518]]
samples=pd.DataFrame(data,columns=columns,index=index) 
line=pygal.Line(fill=False,height=int(400),
                style=BlueStyle(opacity='.3',colors=colors,
                                background='transparent'))
line.title='Samples of the Wholesale Customers Dataset'
line.x_labels=columns
line.add('C1',data[0]); line.add('C2',data[1])
line.add('C3',data[2]); line.add('MEAN',samples.mean())
line.render_to_file('samples.svg')
s1='<figure><embed type="image/svg+xml" '
s2='src="samples.svg" width=900/></figure>'
html(s1+s2)
</script></div>
    <h1>If you want to try Bokeh in SageMathCell</h1>
Python &#38; SageMathCell
<div class="sage"><script type="text/x-sage">
#unlock to install bokeh
#!python3 -m pip install --upgrade pip --user
#!python3 -m pip install bokeh --user
path='/home/sc_work/.sage/local/lib/python3.8/site-packages'
import sys,os,numpy; sys.path.append(path)
from bokeh.layouts import gridplot
from bokeh.plotting import figure,show,output_file
t=numpy.linspace(0,2*numpy.pi,1280); 
x=(numpy.cos(12*t)+numpy.cos(6*t))*numpy.cos(t)
y=(numpy.cos(12*t)+numpy.cos(6*t))*numpy.sin(t)
TOOLS="pan,wheel_zoom,box_zoom,reset,save,box_select"
p1=figure(title='PLotting Example',tools=TOOLS)
p1.circle(x,y,legend_label=u'ϱ = cos 12θ + cos 6θ')
p1.circle(2*x,2*y,legend_label=u'2ϱ',color="red")
p1.legend.title='Polar Functions'
p2=figure(title='Another Plotting Example',tools=TOOLS)
p2.circle(x,y,legend_label=u'ϱ = cos 12θ + cos 6θ')
p2.line(x,y,legend_label=u'ϱ = cos 12θ + cos 6θ')
p2.square(2*x,2*y,legend_label=u'2ϱ',
          fill_color=None,line_color="red")
p2.line(2*x,2*y,legend_label=u'2ϱ',line_color="red")
output_file("legend.html",title="plotting examples")
show(gridplot([p1,p2],ncols=int(2),
              plot_width=int(450),plot_height=int(450)))
fpath='https://sagecell.sagemath.org/kernel/'
fpath+=os.getcwd()[14:]+'/files/legend.html'
s1='<div id="data"><iframe src="'
s2='" height="500" width="1000"></iframe></div>'
html(s1+fpath+s2)
</script></div>
    <h1>If you want to use PyTorch in SageMathCell</h1>
Python &#38; SageMathCell
<div class="linked"><script type="text/x-sage">
#unlock to install torch & torchvision
#!python3 -m pip install --upgrade pip --user
#!python3 -m pip install torch==1.6.0 --user
#!python3 -m pip install torchvision --user
path='/home/sc_work/.sage/local/lib/python3.8/site-packages'
import sys; sys.path.append(path)
</script></div>
<div class="linked"><script type="text/x-sage">
import numpy,pylab,torch,torchvision
import torchvision.transforms as transforms
tr0=(0.5,0.5,0.5)
transform=transforms.Compose([transforms.ToTensor(),
                              transforms.Normalize(tr0,tr0)])
trainset=torchvision.datasets.CIFAR10(root='./data',
                                      train=True,
                                      download=True,
                                      transform=transform)
trainloader=torch.utils.data.DataLoader(trainset,
                                        batch_size=int(8),
                                        shuffle=True,
                                        num_workers=int(2))
classes=('plane','car','bird','cat','deer',
         'dog','frog','horse','ship','truck')
def imshow(img):
    npimg=img.numpy()/2.0+0.5
    pylab.figure(figsize=(11,2))
    tr1=(int(1),int(2),int(0))
    pylab.imshow(numpy.transpose(npimg,tr1))
    pylab.show()
dataiter=iter(trainloader); images,labels=dataiter.next()
imshow(torchvision.utils.make_grid(images))
print(' '.join('%5s'%classes[labels[j]] 
      for j in range(8)))
</script></div>
    <h1>Yes. It's possible to use </h1>
    <h1>GeoPandas in SageMathCell</h1>
Python &#38; SageMathCell
<div class="sage"><script type="text/x-sage">
#unlock to install geopandas
#!python3 -m pip install --upgrade pip --user
#!python3 -m pip install geopandas --user
path='/home/sc_work/.sage/local/lib/python3.8/site-packages'
import sys; sys.path.append(path)
import pandas,geopandas,pylab
fpath='https://olgabelitskaya.github.io/map.geojson'
df=geopandas.read_file(fpath)
pylab.style.use('seaborn-whitegrid') 
df.boundary.plot(figsize=(9,7),markersize=0,
                 lw=.5,edgecolor='gray') 
pylab.xlim(37.612,37.637); pylab.ylim(55.750,55.766)
pylab.show()
</script></div>
    <h1>You can use OpenCV in SageMathCell</h1>
Python &#38; SageMathCell      
<div class="sage"><script type="text/x-sage">
#unlock to install opencv
#!python3 -m pip install --upgrade pip --user
#!python3 -m pip install opencv-python --user
path='/home/sc_work/.sage/local/lib/python3.8/site-packages'
import sys; sys.path.append(path)
import cv2,pylab,urllib 
dpath='https://olgabelitskaya.github.io/new/'
for f in ['10.png','24.png']:
    input_file=urllib.request.urlopen(dpath+f)
    output_file=open(f,'wb')
    output_file.write(input_file.read())
    output_file.close(); input_file.close() 
edge=cv2.imread('10.png'); edge2=cv2.imread('24.png');
edge=cv2.GaussianBlur(edge,(int(2*3+1),int(2*3+1)),-int(1))[3:-3,3:-3]
edge2=cv2.GaussianBlur(edge2,(int(2*5+1),int(2*5+1)),-int(1))[5:-5,5:-5]
s1='size: %s, shape: %s, type: %s'%\
(edge.size,edge.shape,edge.dtype)
s2='size: %s, shape: %s, type: %s'%\
(edge2.size,edge2.shape,edge2.dtype)
gray_edge=cv2.cvtColor(edge,cv2.COLOR_BGR2GRAY)
gray_edge2=cv2.cvtColor(edge2,cv2.COLOR_BGR2GRAY)
edges=cv2.Canny(gray_edge,int(60),int(230))
edge[edges!=int(0)]=(0,0,255)
edges2=cv2.Canny(gray_edge2,int(50),int(120))
edge2[edges2!=int(0)]=(0,0,255)
pylab.figure(figsize=(9,5))
pylab.subplot(121); pylab.title(s1,fontsize=10,loc='left')
pylab.imshow(cv2.cvtColor(edge,cv2.COLOR_BGR2RGB))
pylab.subplot(122); pylab.title(s2,fontsize=10,loc='left')
pylab.imshow(cv2.cvtColor(edge2,cv2.COLOR_BGR2RGB))
pylab.show()
</script></div>
    <h1>Do you want to display</h1>
    <h1>Folium maps in SageMathCell?</h1>
Python &#38; SageMathCell
<div class="sage"><script type="text/x-sage">
#unlock to install folium
#!python3 -m pip install --upgrade pip --user
#!pip3 install folium --user
path='/home/sc_work/.sage/local/lib/python3.8/site-packages'
import sys; sys.path.append(path) 
import folium,warnings
warnings.filterwarnings('ignore',category=UserWarning)
m=folium.Map(location=[55.7570,37.6190],zoom_start=int(17))
folium.Marker(location=[55.7571,37.6224],popup='Nikolskaya',
              icon=folium.Icon(icon='cloud')).add_to(m)
m.save('map.html')
fpath='https://sagecell.sagemath.org/kernel/'+\
os.getcwd()[14:]+'/files/map.html'
s1='<div id="data"><iframe src="'
s2='" height="700" width="700"></iframe></div>'
html(s1+fpath+s2)
</script></div>
    <h1>If you want to check installed packages</h1>
    <h1>for R in SageMathCell</h1>
R &#38; SageMathCell
<div class="sage_r"><script type="text/x-sage">
%%r
data.frame(installed.packages()[,c(3:4)])
</script></div>
    <h1>Do you want to display </h1>
    <h1>Wolfram plots in SageMathCell?</h1>
<td style="font-weight:bold;text-align:left;"><pre><code class="Mathematica">    
Manipulate[PolarPlot[Evaluate[Table[(i*t+k/5)*Log[t/5],{k,0,9}]],{t,0,2\[Pi]},
                     PlotStyle->ColorData[n,"ColorList"],GridLines->Automatic,
                     PlotRange->{{-14,5},{-7,2}},ImageSize->Large],              
           {i,1,2},{n,Range[1,24,1]}]
</code></pre></td>
<td style="font-weight:bold;text-align:left;"><pre><code class="Mathematica">
EmbedCode[CloudDeploy[%22]]
(*Run in the next cell the command with [%N] where N is the number of previous cell input*)
</code></pre></td>
<div class="sage_html"><script type="text/x-sage">
%%html
<div style="border:10px double white; width:710px; height:710px; overflow:auto; 
     padding:10px; background-color:aliceblue">
<iframe src="https://www.wolframcloud.com/obj/fb6829ef-cb22-414f-ab25-488497bcbac0?_embed=frame" 
        width="700" height="500"/></div>
</script></div>
    <h1>If somebody told you WolframCloud is hard to explore.</h1> 
    <h1>Think Again</h1>
<div class="sage_html"><script type="text/x-sage">
%%html
<div style="border:10px double white; width:710px; height:710px; 
            overflow:auto; padding:10px; background-color:aliceblue">
<img src="wolfram1.jpeg" width="700" height="700"/></div>
</script></div>
  </body>
</html>