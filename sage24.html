<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>SageMath_Part24</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>$(function () {
    // Make the div with id 'mycell' a Sage cell
    sagecell.makeSagecell({inputLocation:  '#examplecell',
                           template:       sagecell.templates.minimal,
                           evalButtonText: 'Activate'});
    // Make *any* div with class 'compute' a Sage cell
    sagecell.makeSagecell({inputLocation: 'div.compute',
                           evalButtonText: 'Evaluate'});
    });
    </script>
  </head>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Orbitron');
  h1, h2 {color:#3636ff; font-family:'Orbitron'; text-shadow:5px 5px 5px #aaa;}
  p, a {color:darkblue; font-size:120%; text-shadow:5px 5px 5px #aaa;}
  </style>  
  <body>

  <h1>&#x1F4D1; &nbsp;SageMath Online Mini Campus. Part 24</h1>
<a href="https://www.instagram.com/olga.belitskaya/">&#x1F300; &nbsp; Instagram Posts &nbsp;</a>     
<a href="https://www.pinterest.ru/olga_belitskaya/code-style/">&#x1F300; &nbsp; Pinterest Posts</a>
    <p>The set of interactive pages with the following structure:</p>
    <p>Example of Computations $\implies$ Your Field for Experiments $\implies$ Try Python Modules $\implies$ Try Other Languages</p>
      
  <h2>Example of Computations</h2>
    <p>Click the “Activate” button below to display an interactive example.</p>      
<div id="examplecell"><script type="text/x-sage">
#@interact
#def _(t=slider(0.05,0.95,0.05,0.05)):

</script></div>
  <h2>Your Field for Experiments</h2>
    <p>Type your own SageMath code lines below and click “Evaluate”.</p>
      
<div class="compute"><script type="text/x-sage">

</script></div>
    <p></p>
<div class="compute"><script type="text/x-sage">
#@interact
#def _(N=(50,200,25)):

</script></div>
    <p></p>
<div class="compute"><script type="text/x-sage">
var('k,x,y'); pretty_print(y==x^2*k^2-12*x^2+k^2*x-3*sqrt(3)*k*x+6*x+k^2-sqrt(3)*k-6)
c=[colormaps.jet(0.03*i)[:3] for i in [0..31]]; k=[0.12*i for i in [0..31]]
p=sum([plot(x^2*k[i]^2-12*x^2+k[i]^2*x-3^1.5*k[i]*x+6*x+k[i]^2-3^0.5*k[i]-6,(x,-2,2),color=c[i],
            legend_label='%.2f'%k[i]) for i in [0..31]])
p.set_legend_options(loc=(1.1,-0.1)); p.show(ymin=-8,ymax=2,figsize=(10,5))
</script></div> 
      
  <h2>Try Python Modules</h2>
<div class="compute"><script type="text/x-sage">
import numpy,pylab,time; from sklearn import manifold,datasets
X,y = datasets.load_digits(return_X_y=True); t0=time.time()
X_emb = manifold.TSNE(n_components=2,learning_rate=800.0).fit_transform(X)
x_min,x_max = numpy.min(X_emb,0),numpy.max(X_emb,0); X_emb = (X_emb-x_min)/(x_max-x_min)
f,ax = pylab.subplots(1,figsize=(7,7)); pylab.axis("off")
for i in range(X_emb.shape[0]):
    pylab.text(X_emb[i,0],X_emb[i,1],str(y[i]),color=pylab.cm.hsv(y[i]/10.))
pylab.title("t-SNE embedding %f s"%(time.time()-t0)); pylab.show()
</script></div>
      
  <h2>Try Other Languages (R, HTML, ...)</h2>
<div class="compute"><script type="text/x-sage">
%%r
library('grDevices'); library('MASS'); library('nnet'); data(Boston); n <- dim(Boston)[1];
svg(filename="Rplots.svg",width=10,height=5,pointsize=12,onefile=T,
      family="sans",bg="white",antialias=c("default","none","gray","subpixel"))
model <- nnet(as.matrix(Boston[1:430,-14]),as.matrix(Boston[1:430,14]),size=64,maxit=600,linout=T,decay=0.01)
predictions <- predict(model,as.matrix(Boston[431:n,-14]),type="raw")
plot(as.matrix(Boston[431:n,14]),col="#3636ff",type="o",ylab='targets & predictions',yaxt="n");  
par(new=TRUE); plot(predictions,col="#ff3636",type="o",cex=1.3,ylab='targets & predictions'); dev.off()
</script></div>
    <p>Click “Evaluate” twice. Use in HTML documents with &#60;/script&#62; in the end.</p>
<div class="compute"><script type="text/x-sage">
%%html
<style>
svg {background-color:silver;}
text {fill:#fff; font-size:135%;} 
.line {fill:none; stroke:#3636ff; stroke-width:2;}             
.grid line,.grid path {stroke:#fff; stroke-opacity:0.9; shape-rendering:crispEdges;}       
</style>
<script src="https://d3js.org/d3.v4.min.js"/>
<svg/><script>
var n = 630, m = 35, margin = {top:m,right:m,bottom:m,left:m},
    width = 500-margin.left-margin.right, height = 500-margin.top-margin.bottom; 
var xScale = d3.scaleLinear().domain([-2,2]).range([0,width]);
var yScale = d3.scaleLinear().domain([-2,2]).range([height,0]);
function make_x_gridlines() {return d3.axisBottom(xScale).ticks(11)};
function make_y_gridlines() {return d3.axisLeft(yScale).ticks(11)};            
var data = d3.range(0,n).map(function(i){return {
    "x":Math.cos(0.01*i)+Math.cos(0.11*i)/2+Math.sin(0.3*i)/3,
    "y":Math.sin(0.01*i)+Math.sin(0.11*i)/2+Math.cos(0.3*i)/3}
    })
var lineColor = d3.scaleSequential().domain([0,n]).interpolator(d3.interpolateCool);                       
var svg = d3.select("svg")
            .attr("width",width+margin.left+margin.right)
            .attr("height",height+margin.top+margin.bottom)
            .append("g").attr("transform","translate("+margin.left+","+margin.top+")");
svg.append("g").attr("class","x axis").call(d3.axisBottom(xScale).tickSize(0.5))
               .attr("transform","translate(0,"+height+")"); 
svg.append("g").attr("class","y axis").call(d3.axisLeft(yScale).tickSize(0.5));    
svg.append("g").attr("class","grid").attr("transform","translate(0,"+height+")")
               .call(make_x_gridlines().tickSize(-height).tickFormat(""));
svg.append("g").attr("class","grid").call(make_y_gridlines().tickSize(-width).tickFormat(""));
var line = d3.line().curve(d3.curveMonotoneX)
             .x(function(d) {return xScale(d.x);}).y(function(d) {return yScale(d.y);});
svg.append("path").datum(data).attr("class","line").attr("d",line); 
</script></div>
    <p></p>
  </body>
</html>