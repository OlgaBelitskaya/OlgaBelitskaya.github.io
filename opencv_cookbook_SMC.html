<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>üèôOpenCV_Cookbook</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>$(function (){
    sagecell.makeSagecell({inputLocation:'div.linked',linked:true,
                           evalButtonText:'Run Linked Cells'});});
    </script>
  </head>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Akronim|Lobster');
  h1,h2,th {color:#348ABD; font-family:'Akronim'; font-size:120%; text-shadow:4px 4px 4px #aaa;}
  p,a {color:slategray; font-family:'Lobster'; font-size:120%; text-shadow:4px 4px 4px #aaa;}
  .sagecell .CodeMirror-scroll {min-height:3em; max-height:30em;}
  body {margin:5px 5px 5px 15px;}
  </style>
  <body>
    <h1>üìë &nbsp; OpenCV Cookbook</h1>  
<a href="https://olgabelitskaya.github.io/README.html">&#x1F300; &nbsp; Home Page &nbsp; &nbsp; &nbsp;</a>
<a href="https://colab.research.google.com/drive/1GD7Oi1LtFaEi8VOjiBM5cj5ayWpaejaf">
&#x1F300; &nbsp; Google Colaboratory Variant &nbsp; &nbsp; &nbsp;</a>
<a href="https://www.instagram.com/olga.belitskaya/">&#x1F300; &nbsp; Instagram Posts &nbsp; &nbsp; &nbsp;</a>     
<a href="https://www.pinterest.ru/olga_belitskaya/code-style/">&#x1F300; &nbsp; Pinterest Posts</a><br/>
    <h2>‚úíÔ∏è &nbsp; Libraries & Color Tools</h2>  
<div class="linked"><script type="text/x-sage">
#!python3 -m pip install opencv-python --user
</script></div><br/>
<div class="linked"><script type="text/x-sage">
path='/home/sc_work/.sage/local/lib/python3.7/site-packages'
import sys; sys.path.append(path)
import warnings; warnings.filterwarnings('ignore')
import urllib,cv2
from skimage import io,transform
import numpy as np,pylab as pl
import seaborn as sb,scipy as sp
pl.style.use('seaborn-whitegrid')
pl.rcParams['figure.figsize']=(7,7)
</script></div><br/>
<div class="linked"><script type="text/x-sage">
fpath='https://olgabelitskaya.github.io/'
def get_image(original,flag=cv2.COLOR_BGR2RGB,fpath=fpath):
    input_file=urllib.request.urlopen(fpath+original)
    output_file=open(original,'wb'); 
    output_file.write(input_file.read())
    output_file.close(); input_file.close()
    img=cv2.imread(original)
    return cv2.cvtColor(img,flag)
</script></div><br/>
<div class="linked"><script type="text/x-sage">
ColorFlags=[flag for flag in dir(cv2) if flag.startswith('COLOR')]
pretty_print(np.array(ColorFlags[:30]))
</script></div><br/>
    <h2>‚úíÔ∏è &nbsp; Data</h2> 
<div class="linked"><script type="text/x-sage">
plist=[get_image('pattern0%s.jpeg'%(i+1)) for i in range(7)]
flower_img=get_image('flower.png')
cat_img=get_image('cat.png')
sport_img=get_image('sport.jpg')
</script></div><br/>
<div class="linked"><script type="text/x-sage">
img=plist[2]
st='Image parameters: size - %s; shape - %s; type - %s'
pretty_print(st%(img.size,img.shape,img.dtype))
pl.imshow(img); pl.show()
</script></div><br/>
    <h2>‚úíÔ∏è &nbsp; Simple Manipulations</h2>       
<div class="linked"><script type="text/x-sage">
pl.rcParams['figure.figsize']=(12,6)
pl.figure(1); pl.subplot(121)
img_inv=cv2.bitwise_not(img) # invert colors
pl.imshow(img_inv)
img_w2b=img.copy(); pl.subplot(122)
# white to black
img_w2b[np.where((img_w2b==[255,255,255]).all(axis=2))]=[0,0,0]
pl.imshow(img_w2b); pl.show()
</script></div><br/>
<div class="linked"><script type="text/x-sage">
# gray scaled
pl.figure(1); pl.subplot(121)
img_gray1=cv2.cvtColor(img,cv2.COLOR_RGB2GRAY)
pl.imshow(img_gray1)
pl.subplot(122)
img_gray2=cv2.cvtColor(img_w2b,cv2.COLOR_RGB2GRAY)
pl.imshow(img_gray2); pl.show()
</script></div><br/>
<div class="linked"><script type="text/x-sage">
pl.rcParams['figure.figsize']=(8,8); N=50
# skimage & opencv - grayscale, resize, invert
img_skgray=io.imread('pattern03.jpeg',as_gray=True)
img_skgray_resized=transform.resize(img_skgray,(N,N))
img_skgray_resized2=cv2.bitwise_not(img_skgray_resized)
img_cvgray_resized=cv2.resize(img_gray1,(N,N),
                              interpolation=cv2.INTER_CUBIC)
img_cvgray_resized2=cv2.bitwise_not(img_cvgray_resized)
pl.figure(1); pl.subplot(221)
pl.imshow(img_skgray_resized,cmap=pl.cm.Greys)
pl.subplot(222); pl.imshow(img_skgray_resized2)
pl.subplot(223)
pl.imshow(img_cvgray_resized,cmap=pl.cm.Greys)
pl.subplot(224)
pl.imshow(img_cvgray_resized); pl.show()
</script></div><br/>
<div class="linked"><script type="text/x-sage">
pl.rcParams['figure.figsize']=(8,8)
# split color channels
img0=plist[0]; b,g,r=cv2.split(img0)
# merge channels
img_merged=cv2.merge([b,g,r])
# display one of the channels
pl.figure(1); pl.subplot(231); pl.imshow(r,cmap=pl.cm.Reds_r)
pl.subplot(232); pl.imshow(g,cmap=pl.cm.Greens_r)
pl.subplot(233); pl.imshow(b,cmap=pl.cm.Blues_r)
# display merged image
pl.subplot(234); pl.imshow(img_merged); pl.show()
</script></div><br/>
<div class="linked"><script type="text/x-sage">

</script></div><br/>
<div class="linked"><script type="text/x-sage">

</script></div><br/>
<div class="linked"><script type="text/x-sage">

</script></div><br/>
  </body>
</html>      