<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Instagram_Posts2</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>$(function () {
    sagecell.makeSagecell({inputLocation:'div.sage_html',evalButtonText:'Run HTML'});  
    sagecell.makeSagecell({inputLocation:'div.sage_js',evalButtonText:'Run JavaScript'});
    sagecell.makeSagecell({inputLocation:'div.sage_r',evalButtonText:'Run R'});  
    sagecell.makeSagecell({inputLocation:'div.sage',evalButtonText:'Run'});
    });
    </script>
  </head>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Orbitron');
  h1, h2 {color:#3636ff; font-family:'Orbitron'; text-shadow:5px 5px 5px #aaa;}
  p, a {color:darkblue; font-size:120%; text-shadow:5px 5px 5px #aaa;}
  .sagecell .CodeMirror-scroll {min-height:3em; max-height:30em;}
  </style>  
  <body>
    <h1>&#x1F4D1; &nbsp;Instagram Posts. Part 2</h1>
<a href="https://www.instagram.com/olga.belitskaya/">&#x1F300; &nbsp; Instagram Posts &nbsp;</a>     
<a href="https://www.pinterest.ru/olga_belitskaya/code-style/">&#x1F300; &nbsp; Pinterest Posts</a>
    <p></p> 
    <h1>Parametric plots with transition using d3.js </h1>
Jupyter Notebook &#38; SageMath Kernel 
    <p>Click “Run” twice. Use in HTML documents with &#60;/script&#62; in the end.</p>
<div class="sage_html"><script type="text/x-sage">
%%html
<style>.point1, .point2 {stroke:#fff; stroke-width:1;}
.grid1 line,.grid1 path {stroke:#fff; stroke-opacity:0.9; shape-rendering:crispEdges;} </style>
<script src="https://d3js.org/d3.v5.min.js"/><svg id="pp1" style="background-color:slategray;"/><script>
var n=630, m0=35, m={top:m0,right:m0,bottom:m0,left:m0}, w=700-m.left-m.right, h=700-m.top-m.bottom; 
var xScale=d3.scaleLinear().domain([-3,3]).range([0,w]); var yScale = d3.scaleLinear().domain([-3,3]).range([h,0]);
function make_x_gridlines() {return d3.axisBottom(xScale).ticks(11)}; function make_y_gridlines() {return d3.axisLeft(yScale).ticks(11)};
var svg=d3.select("#pp1").attr("width",w+m.left+m.right).attr("height",h+m.top+m.bottom)
                         .append("g").attr("transform","translate("+m.left+","+m.top+")");
svg.append("g").attr("class","grid1").attr("transform","translate(0,"+h+")").call(make_x_gridlines().tickSize(-h).tickFormat(""));
svg.append("g").attr("class","grid1").call(make_y_gridlines().tickSize(-w).tickFormat(""));
var data1=d3.range(0,n).map(function(i){return {"x":(Math.cos(0.12*i)+1)*Math.cos(0.01*i),"y":(Math.cos(0.12*i)+1)*Math.sin(0.01*i)}});
var data2=d3.range(0,n).map(function(i){return {"x":(Math.cos(0.12*i)+2)*Math.cos(0.01*i),"y":(Math.cos(0.12*i)+2)*Math.sin(0.01*i)}});
svg.selectAll(".point1").data(data1).enter().append("circle").attr("class","point1")
                        .attr("r",3).attr("cx",function(d) {return xScale(d.x)}).attr("cy",function(d) {return yScale(d.y)})
                        .transition().duration(20000).styleTween("fill",function(){return d3.interpolate('#3636ff','#ff3636')});
svg.selectAll(".point2").data(data2).enter().append("circle").attr("class","point2")
                        .attr("r",4).attr("cx",function(d) {return xScale(d.x)}).attr("cy",function(d) {return yScale(d.y)})
                        .transition().duration(20000).styleTween("fill",function(){return d3.interpolate('#ff3636','#3636ff')});
</script></div>
    <h1>If you want to switch from the polar form to the parametric one</h1>
Jupyter Notebook &#38; SageMath Kernel      
    <p></p> 
<div class="sage"><script type="text/x-sage">
var('t'); f=cos(24*t)+cos(12*t); n=7 
def cool(i): return colormaps.cool(45*i)[:3] 
p1=sum([polar_plot(f+i,(t,0,2*pi),color=cool(i),
                   fill=0.93*(f+i),fillcolor=cool(i)) for i in [1..n]])
p2=sum([parametric_plot(((f+i)*cos(t),(f+i)*sin(t)),(t,0,2*pi),
                        color=cool(i)) for i in [1..n]])
graphics_array([p1,p2]).show(axes=False,figsize=9)
</script></div>
    <p></p>
    <h1>If you want to embed Google charts</h1>
Jupyter Notebook &#38; SageMath Kernel
    <p>Click “Run” twice. Use in HTML documents with &#60;/script&#62; in the end.</p>
<div class="sage_html"><script type="text/x-sage">
%%html
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"/>
<div id="test_googlechart" style="width:700px; height:700px;"/>
<script>
google.charts.load('current',{'packages':['corechart']}); google.charts.setOnLoadCallback(drawChart);
function drawChart() {
    var xy=Array(1274).fill(0).map((r,t) => [(Math.floor(t/638)+r+Math.cos(0.12*t))*Math.cos(0.01*t),
                                             (r+Math.cos(0.12*t))*Math.sin(0.01*t),(r+1+Math.cos(0.12*t))*Math.sin(0.01*t)]);
    for (var i=1; i<637; i++) {xy[637+i][1]=NaN; xy[i+1][2]=NaN;}; xy.unshift(['x','ϱ = cos 12θ','ϱ = 1 + cos 12θ']); 
    var data=google.visualization.arrayToDataTable(xy); var options={curveType:'function',legend:{position:'bottom'}};
    var chart=new google.visualization.LineChart(document.getElementById('test_googlechart')); chart.draw(data,options);
};
</script></div>
    <p></p>
<div class="sage"><script type="text/x-sage">
import numpy,pylab; T=numpy.linspace(start=0,stop=2*numpy.pi,num=200)
XY=numpy.array([[(numpy.cos(12*T)+r)*numpy.cos(T),(numpy.cos(12*T)+r)*numpy.sin(T)] for r in range(3)])
XYP=numpy.array([[T,abs(r+numpy.cos(12*T))] for r in range(3)])
fig=pylab.figure(figsize=(10,5)); ax1=fig.add_subplot(121); ax2=fig.add_subplot(122,projection='polar')
colors=['#36ff36','#ff3636','#3636ff']; labels=[u'ϱ = cos 12θ',u'ϱ = 1 + cos 12θ',u'ϱ = 2 + cos 12θ']
[ax1.plot(XY[i][0],XY[i][1],color=colors[i],label=labels[i]) for i in range(3)]
[ax2.plot(XYP[i][0],XYP[i][1],color=colors[i],label=labels[i]) for i in range(3)]
lines,labels=ax1.get_legend_handles_labels(); ax1.legend(lines,labels,bbox_to_anchor=(1,1.15),loc=2); ax1.grid();
ax1.set_xlim(-4,4); ax1.set_ylim(-4,4); ax1.set_xlabel('x'); ax1.set_ylabel('y'); pylab.show()
</script></div>
    <p></p>
    <h1>If you want to test plotly.js </h1>
Jupyter Notebook &#38; SageMath Kernel
    <p>Click “Run” twice. Use in HTML documents with &#60;/script&#62; in the end.</p>
<div class="sage_html"><script type="text/x-sage">
%%html
<script src="https://cdn.plot.ly/plotly-latest.min.js"/>
<div id="test_plotly" style="width:600px;height:600px;"/>
<script>
TEST1=document.getElementById('test_plotly');
var x1=Array(640).fill(0).map((r,t) => ((r+Math.cos(0.12*t))*Math.cos(0.01*t)));
var y1=Array(640).fill(0).map((r,t) => ((r+Math.cos(0.12*t))*Math.sin(0.01*t)));
var x2=Array(640).fill(1).map((r,t) => ((r+Math.cos(0.12*t))*Math.cos(0.01*t)));
var y2=Array(640).fill(1).map((r,t) => ((r+Math.cos(0.12*t))*Math.sin(0.01*t)));
Plotly.plot(TEST1,[{x:x1,y:y1,line:{color:'#3636ff'},name:'ϱ = cos 12θ'}]);
Plotly.plot(TEST1,[{x:x2,y:y2,line:{color:'#ff3636'},name:'ϱ = 1 + cos 12θ'}]);
</script></div>
    <p></p>
    <h1>Parametric plots with simple basic R libraries</h1>
Jupyter Notebook &#38; SageMath Kernel 
<div class="sage_r"><script type="text/x-sage">
%%r
svg(filename="Rplots.svg",width=7,height=7,pointsize=12,
    onefile=T,family="sans",bg="slategray",
    antialias=c("default","none","gray","subpixel"))
t<-seq(0,2*pi,len=360); n=12; d=.4
x1<-cos(n*t)*cos(t); y1<-cos(n*t)*sin(t) 
x2<-(cos(n*t)+d)*cos(t); y2<-(cos(n*t)+d)*sin(t)
plot(x2,y2,type='o',cex=0.8,col='#3636ff',
     xlab='',ylab=''); par(new=T); 
plot(x1,y1,type='o',cex=0.8,col='#ff3636',
     xlim=c(-1-d,1+d),ylim=c(-1-d,1+d),xlab='x',ylab='y',
     fg='white',col.axis='white',col.lab='white'); 
grid(col='white'); dev.off()
</script></div>
    <p></p>
    <h1>Parametric area plots and polar functions in Highcharts.js</h1>
Jupyter Notebook &#38; SageMath Kernel
    <p>Click “Run” twice. Use in HTML documents with &#60;/script&#62; in the end.</p>
<div class="sage_html"><script type="text/x-sage">
%%html
<script src="https://code.highcharts.com/highcharts.js"/>
</script></div>
    <p></p>
<div class="sage_js"><script type="text/x-sage">
%%javascript
var n=24,q=.01; var s2='ϱ = 1 + cos '.concat(n).concat(' θ');
var s1='ϱ = cos  '.concat(n).concat(' θ');
var xy1=Array(640).fill(0).map((r,t)=>
    [(r+Math.cos(q*t))*Math.cos(n*q*t),(r+Math.cos(n*q*t))*Math.sin(q*t)]);
var xy2=Array(640).fill(1).map((r,t)=>
    [(r+Math.cos(n*q*t))*Math.cos(q*t),(r+Math.cos(n*q*t))*Math.sin(q*t)]);
Highcharts.chart('container', {
    chart:{type:'area'},xAxis:{title:{text:'x'}},yAxis:{title:{text:'y'}},
    title:{text:'Parametric Area Plot'},credits:{enabled:false},
    series: [{name:s2,color:'#3636ff',data:xy2},
             {name:s1,color:'#ff3636',data:xy1}] });
</script></div>
    <p></p> 
<div id="container1" style="height:600px; width:600px; margin:0 auto">html+javascript is launching here...</div>
    <p></p>
  </body>
</html> 