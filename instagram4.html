<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=0.9*device-width">
    <title>Instagram_Posts4</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>$(function () {
    sagecell.makeSagecell({inputLocation:'div.linked',linked:true,evalButtonText:'Run Linked Cells'});
    sagecell.makeSagecell({inputLocation:'div.sage_html',evalButtonText:'Run HTML'});  
    sagecell.makeSagecell({inputLocation:'div.sage_js',evalButtonText:'Run JavaScript'});
    sagecell.makeSagecell({inputLocation:'div.sage_r',evalButtonText:'Run R'});  
    sagecell.makeSagecell({inputLocation:'div.sage',evalButtonText:'Run'});
    });
    </script>
  </head>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Orbitron');
  h1, h2 {color:#3636ff; font-family:'Orbitron'; text-shadow:5px 5px 5px #aaa;}
  p, a {color:darkblue; font-size:120%; text-shadow:5px 5px 5px #aaa;}
  .sagecell .CodeMirror-scroll {min-height:3em; max-height:50em;}
  </style>  
  <body>
    <h1>&#x1F4D1; &nbsp;Instagram Posts. Part 4</h1>
<a href="https://www.instagram.com/olga.belitskaya/">&#x1F300; &nbsp; Instagram Posts &nbsp;</a>     
<a href="https://www.pinterest.ru/olga_belitskaya/code-style/">&#x1F300; &nbsp; Pinterest Posts</a>
    <p></p> 
    <h1>If packages are not installed in SageMathCell</h1>
Python &#38; SageMathCell 
    <p>Install additional packages</p>
<div class="linked"><script type="text/x-sage">
!python -m pip install --upgrade pip --user
!python -m pip install pygal --user
import sys; sys.path.append('/home/sc_work/.sage/local/lib/python2.7/site-packages')
</script></div>
    <p>Apply them</p>     
<div class="linked"><script type="text/x-sage">
import pygal,pandas; from pygal.style import BlueStyle
columns=['Fresh','Milk','Grocery','Frozen','Detergents_Paper','Delicatessen']
colors=['#1b2c45','#5a8bbd','#008b8b','#ff5a8b']; index= ['C1','C2','C3']
data=[[26373,36423,22019,5154,4337,16523],[16165,4230,7595,201,4003,57],[14276,803,3045,485,100,518]]
samples=pandas.DataFrame(data,columns=columns,index=index); 
line=pygal.Line(fill=False,style=BlueStyle(opacity='.3',colors=colors,background='transparent'),height=int(400))
line.title='Samples of the Wholesale Customers Dataset'; line.x_labels=columns
line.add('C1',data[0]); line.add('C2',data[1]); line.add('C3',data[2]); line.add('MEAN',samples.mean())
line.render_to_file('samples.svg'); html("""<figure><embed type="image/svg+xml" src="samples.svg" width=900/></figure>""")
</script></div>
    <p></p>
    <h1>If you want to try Bokeh in SageMathCell</h1>
Python &#38; SageMathCell
<div class="sage"><script type="text/x-sage">
#unlock to install bokeh
#!python -m pip install --upgrade pip --user
#!python -m pip install bokeh --user
import sys,os,numpy; sys.path.append('/home/sc_work/.sage/local/lib/python2.7/site-packages')
from bokeh.layouts import gridplot; from bokeh.plotting import figure,show,output_file
t=numpy.linspace(0,2*numpy.pi,500); 
x=(numpy.cos(12*t)+numpy.cos(6*t))*numpy.cos(t); y=(numpy.cos(12*t)+numpy.cos(6*t))*numpy.sin(t)
TOOLS = "pan,wheel_zoom,box_zoom,reset,save,box_select"
p1=figure(title='PLotting Example',tools=TOOLS)
p1.circle(x,y,legend=u'ϱ = cos 12θ + cos 6θ')
p1.circle(2*x,2*y,legend=u'2ϱ',color="red")
p1.legend.title='Polar Functions'
p2=figure(title='Another Plotting Example',tools=TOOLS)
p2.circle(x,y,legend=u'ϱ = cos 12θ + cos 6θ'); p2.line(x,y,legend=u'ϱ = cos 12θ + cos 6θ')
p2.square(2*x,2*y,legend=u'2ϱ',fill_color=None, line_color="red")
p2.line(2*x,2*y,legend=u'2ϱ',line_color="red")
output_file("legend.html",title="plotting examples")
show(gridplot([p1,p2],ncols=int(2),plot_width=int(450),plot_height=int(450)))
path='https://sagecell.sagemath.org/kernel/'+os.getcwd()[14:]+'/files/legend.html'
html("<div id='data'><iframe src=%s height='500' width='1000'></iframe></div>"%path)
</script></div>
    <p></p>
    <h1>If you want to use PyTorch in SageMathCell</h1>
Python &#38; SageMathCell
<div class="linked"><script type="text/x-sage">
#unlock to install torch & torchvision
#!python -m pip install --upgrade pip --user
#!python -m pip install torch --user
#!python -m pip install torchvision --user
#sys.path.append('/home/sc_work/.sage/local/lib/python2.7/site-packages')
</script></div>
    <p></p>
<div class="linked"><script type="text/x-sage">
import numpy,pylab,torch,torchvision; import torchvision.transforms as transforms
transform=transforms.Compose([transforms.ToTensor(),transforms.Normalize((0.5,0.5,0.5),(0.5,0.5,0.5))])
trainset=torchvision.datasets.CIFAR10(root='./data',train=True,download=True,transform=transform)
trainloader=torch.utils.data.DataLoader(trainset,batch_size=int(8),shuffle=True,num_workers=int(2))
classes=('plane','car','bird','cat','deer','dog','frog','horse','ship','truck')
def imshow(img):
    npimg=img.numpy()/2.0+0.5; pylab.figure(figsize=(11,2))
    pylab.imshow(numpy.transpose(npimg,(int(1),int(2),int(0)))); pylab.show()
dataiter=iter(trainloader); images,labels=dataiter.next()
imshow(torchvision.utils.make_grid(images))
pretty_print(' '.join('%5s'%classes[labels[j]] for j in range(8)))
</script></div>
    <p></p>
    <h1>Yes. It's possible to use GeoPandas in SageMathCell</h1>
Python &#38; SageMathCell
<div class="sage"><script type="text/x-sage">
#unlock to install torch & torchvision
#!python -m pip install --upgrade pip --user
#!python -m pip install geopandas --user
sys.path.append('/home/sc_work/.sage/local/lib/python2.7/site-packages')
import pandas,geopandas,pylab
path='https://olgabelitskaya.github.io/map.geojson'; df=geopandas.read_file(path)
pylab.style.use('seaborn-whitegrid'); df.boundary.plot(figsize=(12,7),markersize=0,edgecolor='gray') 
pylab.xlim(37.61,37.64); pylab.ylim(55.750,55.768); pylab.show()
</script></div>
    <p></p>
    <h1>You can use OpenCV in SageMathCell</h1>
Python &#38; SageMathCell      
<div class="sage"><script type="text/x-sage">
#unlock to install opencv
#!python -m pip install --upgrade pip --user
#!pip install opencv-python --user
sys.path.append('/home/sc_work/.sage/local/lib/python2.7/site-packages')
import cv2,pylab,urllib; path='https://olgabelitskaya.github.io/new/'
for f in ['10.png','24.png']:
    input_file=urllib.urlopen(path+f); output_file=open(f,'wb')
    output_file.write(input_file.read()); output_file.close(); input_file.close() 
edge=cv2.imread('10.png'); edge=cv2.GaussianBlur(edge,(2*3+1,2*3+1),-1)[3:-3,3:-3]
edge2=cv2.imread('24.png'); edge2=cv2.GaussianBlur(edge2,(2*5+1,2*5+1),-1)[5:-5,5:-5]
s='size: %s, shape: %s, type: %s'%(str(edge.size),str(edge.shape),str(edge.dtype))+12*' '+\
  'size: %s, shape: %s, type: %s'%(str(edge2.size),str(edge2.shape),str(edge2.dtype))
gray_edge=cv2.cvtColor(edge,cv2.COLOR_BGR2GRAY); gray_edge2=cv2.cvtColor(edge2,cv2.COLOR_BGR2GRAY)
edges=cv2.Canny(gray_edge,60,230); edge[edges!=0]=(0,0,255)
edges2=cv2.Canny(gray_edge2,50,120); edge2[edges2!=0]=(0,0,255)
pretty_print(s); pylab.figure(figsize=(12,5))
pylab.subplot(121); pylab.imshow(cv2.cvtColor(edge,cv2.COLOR_BGR2RGB))
pylab.subplot(122); pylab.imshow(cv2.cvtColor(edge2,cv2.COLOR_BGR2RGB)); pylab.show()
</script></div>
    <p></p>
    <h1>Do you want display Folium maps in SageMathCell?</h1>
Python &#38; SageMathCell
<div class="sage"><script type="text/x-sage">
#unlock to install opencv
#!python -m pip install --upgrade pip --user
#!pip install folium --user
sys.path.append('/home/sc_work/.sage/local/lib/python2.7/site-packages')
import folium,pylab

</script></div>
    <p></p>
    <h1>If you want to check installed packages for R in SageMathCell</h1>
R &#38; SageMathCell
<div class="sage_r"><script type="text/x-sage">
%%r
data.frame(installed.packages()[,c(1,3:4)])
</script></div>
    <p></p>
<div class="sage_r"><script type="text/x-sage">
%%r

</script></div>
    <p></p>
    <h1>If somebody told you WolframCloud is hard to explore.</h1> 
    <h1>Think Again</h1>
<div class="sage_html"><script type="text/x-sage">
%%html
<div style="border:10px double white; width:700px; height:510px; overflow:auto; padding:10px; background-color:aliceblue">
<img src="wolfram1.jpeg" width="700" height="500"/></div>
</script></div>
    <p></p>
  </body>
</html>