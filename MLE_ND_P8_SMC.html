<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=0.9*device-width">
    <title>MLE_ND_P8_SMC</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>$(function () {
    sagecell.makeSagecell({inputLocation:'div.linked',linked:true,evalButtonText:'Run Linked Cells'});  
    sagecell.makeSagecell({inputLocation:'div.sage',evalButtonText:'Run'});
    });
    </script>
  </head>
  <style>
  @import url('https://fonts.googleapis.com/css?family=Orbitron|Roboto');
  body {background-color:aliceblue;}; a, p {color:darkblue; font-family:'Roboto';} 
  h1 {color:#4169E1; font-family:'Orbitron'; text-shadow:4px 4px 4px #ccc;} 
  h2, h3 {color:slategray; font-family:'Orbitron'; text-shadow:4px 4px 4px #ccc;}
  h4 {color:#4169E1; font-family:'Roboto';}
  .sagecell .CodeMirror-scroll {min-height:3em; max-height:70em;}
  .sagecell table.table_form tr.row-a {background-color:lightgray;} 
  .sagecell table.table_form tr.row-b {background-color:aliceblue;}
  .sagecell table.table_form td {padding:5px 15px; color:darkblue; font-family:'Roboto';}
  .sagecell_sessionOutput, .sagecell_sessionOutput pre {color:darkblue; font-family:'Roboto';}
  </style>  
  <body>
    <h1>Machine Learning Engineer Nanodegree</h1>
    <h2>Additional Project</h2>
    <h1>&#x1F4D1; &nbsp;P8: Analyzing the NYC Subway Dataset</h1>
    <h2>Links and Code Library</h2>     
    <h3>Resources</h3>
<a href="https://scikit-learn.org/stable/index.html">&#x1F578;scikit-learn. Machine Learning in Python&nbsp;</a>
<a href="http://scipy-lectures.org/">&#x1F578;Scipy Lecture Notes&nbsp;</a><br/>
<a href=" https://ocw.mit.edu/resources/res-6-009-how-to-process-analyze-and-visualize-data-january-iap-2012/lectures-and-labs/MITRES_6_009IAP12_lab3a.pdf">&#x1F578;Hypothesis Testing - MIT OpenCourseWare&nbsp;</a>
<a href="https://statistics.laerd.com/premium-sample/mwut/mann-whitney-test-in-spss-2.php">&#x1F578;Assumptions of the Mann-Whitney U test&nbsp;</a><br/>     
    <h3>Code Library</h3> 
<div class="linked"><script type="text/x-sage">
import numpy,pandas,pylab,seaborn,sympy,time; pylab.style.use('seaborn-whitegrid')
import warnings; from sklearn.exceptions import DataConversionWarning
for el in [FutureWarning,UserWarning,RuntimeWarning,DataConversionWarning]: warnings.filterwarnings("ignore",category=el)
import statsmodels.api as sm
from scipy.stats import mannwhitneyu,linregress
from sklearn import linear_model
from sklearn.metrics import r2_score
from sklearn.preprocessing import normalize
</script></div>
    <p></p>
    <h3>Set of Functions</h3>
<div class="linked"><script type="text/x-sage">

</script></div>
    <p></p>
    <h2>Statistical Test</h2> 
    <h3>Data Extraction and Description</h3>
<div class="linked"><script type="text/x-sage">
path='https://raw.githubusercontent.com/OlgaBelitskaya/machine_learning_engineer_nd009/master/Machine_Learning_Engineer_ND_P8/'
data=pandas.read_csv(path+'turnstile_data_master_with_weather.csv').drop('index',int(1))
data.describe().T
</script></div>
    <p></p>   
<div class="linked"><script type="text/x-sage">
pretty_print('Data Medians')
data.median()
</script></div>
    <p></p>
    <h3>Test Selection</h3>
    <h4>Question 1.1</h4>
<i>Which statistical test did you use to analyze the NYC subway data? Did you use a one-tail or a two-tail P value?<br/>
What is the null hypothesis? What is your p-critical value?</i>
    <h4>Answer 1.1</h4>
The Mann-Whitney U Test to compare the ridership of NYC subway in rainy and non-rainy days is a good choice.<br/>
The column <i>ENTRIESn_hourly</i> will be a target and the column <i>rain</i> - a feature.<br/>
I will test the <b>null hypothesis</b>: distributions of ridership in NYC subway are the same for rainy and non-rainy days.<br/>Another variant of this hypothesis could be: the difference between ridership medians / means for rainy and non-rainy days is equal to zero.<br/>
I will use a two-tailed test to find the statistical significance in both possible directions of interest.<br/>
Let's setup the p-critical value is equal to 0.05: we will reject the null hypothesis at the confidence level of 95%.  
    <h4>Question 1.2</h4> 
<i>Why is this statistical test applicable to the dataset?<br/>
In particular, consider the assumptions that the test is making about the distribution of ridership in the two samples.</i>
    <h4>Answer 1.2</h4>
The Mann-Whitney U Test is a non-parametric alternative test for comparing two sample medians / means (or two distributions) that come from the same population.<br/>
I have noted that the distribution of <i>ENTRIESn_hourly</i> is not normal so I cannot use the t-test in this case.<br/>
The features' specifics for the Mann-Whitney U test:<br/>
1) one dependent variable is measured at the continuous or ordinal level (<i>ENTRIESn_hourly</i>),<br/>
2) one independent variable consists of two categorical, independent groups (<i>rain</i>),<br/>
3) independence of observations (true for this data, the samples do not affect each other),<br/>
4) if two distributions have the same shapes, the test determines differences in the medians / means of two groups, if they have different shapes - <br/>
differences in the distributions of two groups (distributions in our case, the shapes are similar but with different levels),<br/>
5) two samples under consideration could not have the same number of observations (true for this data).
    <h3>Test Execution</h3>   
At first, I will describe two samples, then I will run the test and display the results.
<div class="linked"><script type="text/x-sage">
pretty_print("ENTRIESn_hourly in rainy days")
rainy_entries_hourly=data['ENTRIESn_hourly'][data['rain']==1]
rainy_entries_hourly.describe()
</script></div>
    <p></p>
<div class="linked"><script type="text/x-sage">
pretty_print("ENTRIESn_hourly in non-rainy days")
non_rainy_entries_hourly=data['ENTRIESn_hourly'][data['rain']==0]
non_rainy_entries_hourly.describe()
</script></div>
    <p></p>
<div class="linked"><script type="text/x-sage">

</script></div>
    <p></p>
<div class="linked"><script type="text/x-sage">

</script></div>
    <p></p>
    <h3>Additional Code Cell</h3>
<div class="linked"><script type="text/x-sage">

</script></div>
    <p></p> 
  </body>
</html>