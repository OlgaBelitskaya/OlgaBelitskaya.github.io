<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>SageMathCell</title>
    <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script>$(function () {
    // Make the div with id 'mycell' a Sage cell
    sagecell.makeSagecell({inputLocation:  '#mycell',
                           template:       sagecell.templates.minimal,
                           evalButtonText: 'Activate'});
    // Make *any* div with class 'compute' a Sage cell
    sagecell.makeSagecell({inputLocation: 'div.compute',
                           evalButtonText: 'Evaluate'});
    });
    </script>
  </head>
  <style>
  h1 {color:#3636ff; text-shadow:5px 5px 5px #aaa;}
  h2 {color:darkblue; text-shadow:5px 5px 5px #aaa;}
  p, th {font-size:110%; text-shadow:5px 5px 5px #aaa;}
  </style>  
  <body>
  <h1>&#x1F4D1; &nbsp; Лабораторная работа №1</h1>
  <h1>«Сортировка. Символы. Множества»</h1>
  <h2>Вариант 22</h2>
      
  <h2>Задание</h2>
<p>Упорядочить символы строки, расположив символы в указанном в нижеследующей таблице порядке (по вариантам) двумя способами:</p> 
<p>- с созданием своей таблицы символов и </p>
<p>- без ее создания (со сложным условием сравнения и множествами). </p>
<p>Провести анализ аномалий: строка не пустая и других символов (кроме указанных) нет. </p>
<p>При выводе результата в начало строки и в конец добавить символ " (двойная кавычка) для обозначения начала и конца строки, </p>
<p>что особенно актуально для строк из пробелов и других непечатных символов (s:= +«нужный символ»+s+«нужный символ или строка»). </p>
<p>- Указание 1. Для проверки и сортировки использовать процедуры, расположенные в отдельном модуле. </p>
<p>- Указание 2. Для проверки принадлежности символа к одной из трёх групп использовать множества. </p>
<p>- Указание 3. Изменить (упорядочить) заданную строку по указанному в каждом варианте правилу «на месте» без создания дополнительной строки (или массива, файла и т.д.).</p>
  <h2>1. Условие задачи</h2>            
<p>Упорядочить строку, расположив символы в указанном в таблице порядке, убедившись, что строка не пустая и других символов (кроме указанных) нет.</p>
<table border="1" style="width:100%;">
  <tr>
    <th>Сначала идут символы</th>
    <th>Затем символы</th> 
    <th>А в конце – символы</th>
  </tr>
  <tr>
    <td>Кириллицы строчные в исходно заданном порядке, включая ё</td>
    <td>Кириллицы ЗАГЛАВНЫЕ в алфавитном порядке (А..ЕЁ..Я)</td> 
    <td>Цифры в исходно заданном порядке</td>
  </tr>
</table> 
  <h2>2. Уточненное условие задачи</h2>
<p>Задана строка S. Проверить, что строка S не пустая и состоит только из цифр, заглавных и строчных букв кириллицы:</p> 
<p>- если строка пустая - вывести сообщение «Пустая строка»,</p>
<p>- если присутствуют иные символы - вывести сообщение «Некорректные символы»,</p> 
<p>- в противном случае, расположить символы строки в указанном в таблице порядке и вывести результат на экран.</p>
<p>Таблица допустимых символов: абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ0123456789</p>
<p>Для ввода и упорядочивания строки нажмите кнопку «Activate».</p>
<p>Примеры строк для тестирования.</p>
<table border="1" style="width:50%;">
  <tr><th>Номер</th><th>Строка</th></tr>
  <tr><td>   1</td><td>   u''</td></tr>
  <tr><td>   2</td><td>   u'iJщюкQ4'</td></tr>
  <tr><td>   3</td><td>   u'01234'</td></tr>
  <tr><td>   4</td><td>   u'Ау'</td></tr>
  <tr><td>   5</td><td>   u'ЁЖИКВТУМАНЕ'</td></tr>
  <tr><td>   6</td><td>   u'StartEnd'</td></tr>
  <tr><td>   7</td><td>   u'adressADRESS'</td></tr>
  <tr><td>   8</td><td>   u'358морозИсолнцеДЕНЬчудестный123'</td></tr>
  <tr><td>   9</td><td>   u'123FirstSecondThirdОЮИ'</td></tr>
</table>      
<div id="mycell"><script type="text/x-sage">
symbol_table = u'абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ0123456789'
test_strings = [u'',u'iJщюкQ4',u'01234',u'Ау',u'ЁЖИКВТУМАНЕ',u'StartEnd',u'adressADRESS',
                u'358морозИсолнцеДЕНЬчудестный123',u'123FirstSecondThirdОЮИ']
c = 0
for s in test_strings:
    c += 1
    s1 = ''.join([s[i] for i in range(len(s)) if s[i] in symbol_table[:33]])
    s2 = ''.join(sorted([s[i] for i in range(len(s)) if s[i] in symbol_table[33:39]]))
    s3 = ''.join([s[i] for i in range(len(s)) if s[i] == symbol_table[39]])
    s4 = ''.join(sorted([s[i] for i in range(len(s)) if s[i] in symbol_table[40:66]]))
    s5 = ''.join([s[i] for i in range(len(s)) if s[i] in symbol_table[66:]])
    if len(s)==0: print c,' ',s,'->','"Пустая строка"'
    elif len(s1+s2+s3+s4+s5)!=len(s): print c,' ',s,'->','"Некорректные символы"'
    else: print c,' ',s,'->','"'+s1+s2+s3+s4+s5+'"'
</script></div>
  <h2>3. Пример</h2>
<p>Для проверки результата нажмите кнопку «Evaluate».</p>
<p>Ячейки SageMath для экспериментов</p>     
<div class="compute"><script type="text/x-sage">
# сортировка с помощью множеств символов
import re
scyrillic_letters,bcyrillic_letters,figures = ur'[а-я,ё]',ur'[А-Я,Ё]',ur'[0-9]'
bcyrillic_letters1,bcyrillic_letters2 = ur'[А-Е]',ur'[Ж-Я]'
test_strings = [u'',u'iJщюкQ4',u'01234',u'Ау',u'ЁЖИКВТУМАНЕ',u'StartEnd',u'adressADRESS',
                u'358морозИсолнцеДЕНЬчудестный123',u'123FirstSecondThirdОЮИ']
for s in test_strings:
    s1 = ''.join(re.findall(scyrillic_letters,s,re.U))+\
         ''.join(sorted(re.findall(bcyrillic_letters1,s,re.U)))+\
         ''.join(re.findall(ur'[Ё]',s,re.U))+\
         ''.join(sorted(re.findall(bcyrillic_letters2,s,re.U)))+\
          ''.join(re.findall(figures,s,re.U))
    if len(s)==0: print s,'->','"Пустая строка"'
    elif len(s1)!=len(s): print s,'->','"Некорректные символы"'
    else: print s,'->','"'+s1+'"'
</script></div>
<p></p>
<div class="compute"><script type="text/x-sage">
# сортировка с помощью таблицы символов
symbol_table = u'абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ0123456789'
test_strings = [u'',u'iJщюкQ4',u'01234',u'Ау',u'ЁЖИКВТУМАНЕ',u'StartEnd',u'adressADRESS',
                u'358морозИсолнцеДЕНЬчудестный123',u'123FirstSecondThirdОЮИ']
for s in test_strings:
    s1 = ''.join([s[i] for i in range(len(s)) if s[i] in symbol_table[:33]])
    s2 = ''.join(sorted([s[i] for i in range(len(s)) if s[i] in symbol_table[33:39]]))
    s3 = ''.join([s[i] for i in range(len(s)) if s[i] == symbol_table[39]])
    s4 = ''.join(sorted([s[i] for i in range(len(s)) if s[i] in symbol_table[40:66]]))
    s5 = ''.join([s[i] for i in range(len(s)) if s[i] in symbol_table[66:]])
    if len(s)==0: print s,'->','"Пустая строка"'
    elif len(s1+s2+s3+s4+s5)!=len(s): print s,'->','"Некорректные символы"'
    else: print s,'->','"'+s1+s2+s3+s4+s5+'"'
</script></div>      
<p>Дополнительная ячейка для экспериментов</p>
<div class="compute"><script type="text/x-sage">
import re

</script></div>
<p>Ячейки для экспериментов на других языках: R, HTML</p>
<div class="compute"><script type="text/x-sage">
%%r

</script></div>
<p></p>
<div class="compute"><script type="text/x-sage">
%%html

</script></div>
<h2>4. Таблица данных</h2>
<table border="1" style="width:100%;">
  <tr><th>Класс</th><th>Имя</th><th>Описание (смысл)</th><th>Тип</th><th>Структура</th><th>Формат</th></tr>
  <tr><td>исходные</td><td>S</td><td>исходная строка</td><td>символьный</td><td>строка</td><td>-</td></tr>
  <tr><td>выходные</td><td>S1</td><td>отсортированная строка без своей таблицы символов</td><td>символьный</td><td>строка</td><td>-</td></tr>
  <tr><td>выходные</td><td>S2</td><td>отсортированная строка со своей таблицей символов</td><td>символьный</td><td>строка</td><td>-</td></tr>
  <tr><td>промежуточные</td><td>N</td><td>номер аномальной ситуации (1 или 2), или 0, если нет аномалий</td><td>цел</td><td>простая переменная</td><td>-</td></tr>
</table> 
<h2>5,6. Форма ввода/вывода</h2>
<table border="1" style="width:50%;">
  <tr><th>Форма ввода</th><th>Форма вывода </th><tr>      
  <tr><td>Введите строку &#60;S&#62;</td><td>Строка до сортировки &#60;S1&#62;</td></tr>
  <tr><td> - </td><td>Отсортированная 1-м способом строка &#60;S1&#62;</td></tr>  
  <tr><td> - </td><td>Строка до сортировки &#60;S2&#62;</td></tr>
  <tr><td> - </td><td>Отсортированная 2-м способом строка &#60;S2&#62;</td></tr>
</table>
<h2>7. Аномалии</h2>
<table border="1" style="width:100%;">
  <tr><th>№</th><th>Описание</th><th>Условие</th><th>Ожидаемая реакция</th></tr>
  <tr><td>1</td><td>Пустая строка S</td><td>S = ''</td><td>«Пустая строка»</td></tr>
  <tr><td>2</td><td>Есть запрещенные символы</td><td>Есть символ S[i], для которого НЕ выполняется условие</td><td>«Некорректные символы»</td></tr>
  <tr><td> - </td><td> - </td><td>(S[i] &#8712; ['а'..'я','ё']) or</td><td> - </td></tr>
  <tr><td> - </td><td> - </td><td>(S[i] &#8712; ['А'..'ЕЁ'..'Я']) or</td><td> - </td></tr>
  <tr><td> - </td><td> - </td><td>(S[i] &#8712; ['0'..'9'])</td><td> - </td></tr>
</table>       
<h2>8. Функциональные тесты</h2>
      
<h2>9. Метод</h2>
<p>1. Введем строку (ввод с клавиатуры в режиме диалога), создадим две копии исходной строки – S1 и S2.</p>
<p>Для каждого из двух методов выполним пункты 2-4:</p>
<p>2. Проверим аномалии. Для проверки аномалий напишем функции Prov1 и Prov2 (без и со своей таблицей символов), возвращающие номер аномальной ситуации N.</p>
<p>3. В случае корректной строки – отсортируем ее по указанному правилу с помощью процедур Sort1 и Sort2. Сортировать будем «пузырьком», указав ВСЕ случаи, когда два СОСЕДНИХ элемента стоят в НЕправильном порядке.</p>
<p>4. Выведем сообщение или отсортированную строку на экран.</p>
<h2>10. Основной алгоритм</h2>
<div style="width:500px; height:750px; overflow:auto;">
    <img src="lab_images/Lab1_2_22_1.png" width="500" height="750"/>
</div>
  </body>
</html>